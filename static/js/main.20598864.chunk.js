(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{184:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},229:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(62),r=n.n(c),o=(n(184),n(9)),s=n(17),i=n.n(s),l=n(12),d=n(246),u=n(248),j=n(242),b=n(11),p=n(101),g=n(14),O=n(13),m=n(241),h=n(249),f=n(251),x=n(1),y=function(e){var t=e.loading,n=e.visible,a=e._id,c=e.choice,r=e.product,o=e.handleDeleteProduct,s=e.handleChangeChoice,i=e.handleChangeVisibility,l=e.setSelectedProduct,d=e.setOpenEditProductModal,u=e.setOpenUpdateImageModal;return Object(x.jsxs)("div",{className:"adminbuttons",children:[Object(x.jsx)(h.a,{disabled:t,loading:t,circular:!0,icon:"remove",size:"large",color:"red",onClick:function(){return o(a)}}),Object(x.jsx)(h.a,{disabled:t,loading:t,circular:!0,icon:"edit",size:"large",color:"purple",onClick:function(){l(r),d(!0)}}),Object(x.jsx)(h.a,{disabled:t,loading:t,circular:!0,icon:n?"hide":"unhide",size:"large",onClick:function(){return i(r)}}),Object(x.jsx)(h.a,{disabled:t,loading:t,circular:!0,icon:"heart",size:"large",color:c?"red":"grey",onClick:function(){return s(r)}}),Object(x.jsx)(h.a,{disabled:t,loading:t,circular:!0,icon:"image",size:"large",color:"yellow",onClick:function(){l(r),u(!0)}})]})},v=n(96),C=n(143),k=(n(215),"https://pigale.herokuapp.com"),M="#8B0D32",S="#000000",P="#FDD100",A=function(e){var t=e.product,n=(e._id,e.name),a=e.type,c=e.region,r=e.description,o=e.price,s=e.category,i=(e.subCategory,e.choice),l=e.visible,d=e.image,u=e.user,j=e.setOpenImageModal,p=e.setSelectedProduct,m=navigator.language||navigator.userLanguage,h={get:function(e,t){return((JSON.parse(localStorage.getItem("translations"))||{})[t]||{})[e]},set:function(e,t,n){var a=JSON.parse(localStorage.getItem("translations"))||Object(v.a)({},t,{});a[t]=Object(b.a)(Object(b.a)({},a[t]),{},Object(v.a)({},e,n)),localStorage.setItem("translations",JSON.stringify(a))}};return Object(x.jsxs)("div",{className:"productitem",style:{display:l||u?"":"none",background:M,border:"1px solid ".concat(S)},children:[Object(x.jsxs)("div",{className:"productitem-header",children:[Object(x.jsxs)(f.a,{as:"h3",style:"vins"===a&&"rouges"===s?{color:"darkred"}:"vins"===a&&"roses"===s?{color:"#fec5d9"}:"vins"===a&&"blancs"===s?{color:"#f1f285"}:{color:P},children:[l?"":"Cach\xe9 : ",n,d&&Object(x.jsx)(O.a,{style:{color:P,margin:8},icon:g.l,onClick:function(){p(t),j(!0)}}),i?Object(x.jsx)(O.a,{className:"bosschoice alvp__icon",icon:g.h,style:{"--fa-primary-color":M,"--fa-secondary-color":S},size:"2x"}):""]}),0!==o&&Object(x.jsxs)("span",{className:"price",style:{background:S,color:P},children:[o.toFixed(2),Object(x.jsx)("small",{children:"\u20ac"})]})]}),c&&Object(x.jsx)("div",{className:"region",style:{background:S,color:P},children:c}),r&&Object(x.jsx)(C.b,{cacheProvider:h,from:"fr",to:m.substr(0,2),googleApiKey:"",children:Object(x.jsx)("p",{className:"description",style:{background:S,color:P},children:Object(x.jsx)(C.a,{children:r})})})]})},w=n(245),I=function(e){var t=e.subCategories,n=e.activeMenu,a=e.setActiveMenu;return Object(x.jsx)(w.a,{compact:!0,borderless:!0,icon:"labeled",className:"categories-menu",style:{background:S},children:t.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(w.a.Item,{style:{color:P},className:"menu-items",active:n===e.slug,onClick:function(){return a(e.slug)},children:[Object(x.jsx)(w.a.Header,{children:e.icon}),e.name]},e.slug)})}))})},E=[{name:"Cuisine",slug:"cuisine",icon:Object(x.jsx)(O.a,{size:"4x",icon:g.c,style:{"--fa-primary-color":M,"--fa-secondary-color":S}}),subCategories:[{name:"Salades",slug:"salades",icon:Object(x.jsx)(O.a,{size:"3x",icon:g.k,style:{"--fa-secondary-color":"red"}})},{name:"Omelettes",slug:"omelettes",icon:Object(x.jsx)(O.a,{size:"3x",icon:g.b,style:{"--fa-secondary-color":"red"}})},{name:"Le Chaud",slug:"chaud",icon:Object(x.jsx)(O.a,{size:"3x",icon:g.p,style:{"--fa-secondary-color":"red"}})}]},{name:"Menu-Enfant",slug:"menuenfant",icon:Object(x.jsx)(O.a,{size:"4x",icon:g.d,style:{"--fa-primary-color":M,"--fa-secondary-color":S}})},{name:"Desserts",slug:"desserts",icon:Object(x.jsx)(O.a,{size:"4x",icon:g.m,style:{"--fa-primary-color":M,"--fa-secondary-color":S}})},{name:"Boissons",slug:"Boissons",icon:Object(x.jsx)(O.a,{size:"4x",icon:g.f,style:{"--fa-primary-color":M,"--fa-secondary-color":S}})}],z=(n(216),["image"]),F=["image"],N=function(e){var t=e.setFilteredProducts,n=e.selectedCategory,c=e.dropdownValue,r=e.activeMenu,s=e.setActiveMenu,d=e.setDropdownValue,u=e.products,v=e.filteredProducts,C=e.user,w=e.setOpenAddProductModal,E=e.setProducts,N=e.setOpenLoginModal,D=e.setSelectedProduct,L=e.setOpenEditProductModal,_=e.setOpenImageModal,B=e.setOpenUpdateImageModal,V=Object(l.f)(),U=n.name,R=n.subCategories,q=Object(a.useState)(!1),T=Object(o.a)(q,2),J=T[0],H=T[1];Object(a.useEffect)((function(){t(u.filter((function(e){return e.type===n.slug})))}),[u]),Object(a.useEffect)((function(){r&&t(null===u||void 0===u?void 0:u.filter((function(e){return e.category===r})))}),[r]);var G=localStorage.getItem("token-petit-clos"),K=function(e){G?(H(!0),i()({method:"delete",url:"".concat(k,"/api/products/deleteProduct"),data:{productId:e},headers:{Authorization:"Bearer "+G}}).then((function(e){return E(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return H(!1)}))):N(!0)},Y=function(e){e.image;var t=Object(p.a)(e,z);t.visible=!e.visible,G?(H(!0),i()({method:"post",url:"".concat(k,"/api/products/updateProduct"),data:{update:t,productId:e._id},headers:{Authorization:"Bearer "+G}}).then((function(e){return E(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return H(!1)}))):N(!0)},Q=function(e){e.image;var t=Object(p.a)(e,F);t.choice=!e.choice,G?(H(!0),i()({method:"post",url:"".concat(k,"/api/products/updateProduct"),data:{update:t,productId:e._id},headers:{Authorization:"Bearer "+G}}).then((function(e){return E(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return H(!1)}))):N(!0)};return Object(x.jsxs)(m.a,{className:"categories",children:[C&&Object(x.jsx)("div",{children:Object(x.jsx)(h.a,{color:"green",circular:!0,size:"medium",onClick:function(){return w(!0)},children:Object(x.jsx)(O.a,{icon:g.j,size:"2x"})})}),Object(x.jsx)(f.a,{className:"categories-header",as:"h2",style:"rouges"===r?{color:"darkred",background:M,border:"1px solid ".concat(S)}:"roses"===r||"champagnes roses"===r?{color:"#fec5d9",background:M,border:"1px solid ".concat(S)}:"blancs"===r||"champagnes bruts"===r?{color:"#f1f285",background:M,border:"1px solid ".concat(S)}:"champagnes blanc de blancs"===r?{color:"white",background:M,border:"1px solid ".concat(S)}:"champagnes mill\xe9sim\xe9s"===r?{color:"gold",background:M,border:"1px solid ".concat(S)}:{color:P,background:M,border:"1px solid ".concat(S)},children:r||U}),Object(x.jsx)(j.a,{hidden:!0}),R&&Object(x.jsx)(I,{products:u,dropdownValue:c,subCategories:R,activeMenu:r,setActiveMenu:s,setDropdownValue:d}),Object(x.jsx)(j.a,{hidden:!0}),Object(x.jsx)("div",{className:"products",children:null===v||void 0===v?void 0:v.sort((function(e,t){return"Boissons"!==V.categorie?t.price-e.price:e.price-t.price})).sort((function(e,t){return t.choice-e.choice})).map((function(e){return Object(x.jsxs)(x.Fragment,{children:[C&&Object(x.jsx)(y,Object(b.a)(Object(b.a)({loading:J},e),{},{product:e,handleDeleteProduct:K,handleChangeVisibility:Y,handleChangeChoice:Q,setSelectedProduct:D,setOpenEditProductModal:L,setOpenUpdateImageModal:B})),Object(x.jsx)(A,Object(b.a)(Object(b.a)({product:e},e),{},{user:C,setOpenImageModal:_,setSelectedProduct:D}),e._id)]})}))}),Object(x.jsx)(j.a,{hidden:!0}),R&&v.length>3&&Object(x.jsx)(I,{products:u,dropdownValue:c,subCategories:R,activeMenu:r,setActiveMenu:s,setDropdownValue:d})]})},D=(n(222),function(e){var t,n,c,r=e.user,s=e.event,l=e.setEvent,d=e.setOpenAddEventModal,u=(e.setOpenEditEventModal,e.setOpenLoginModal),j=Object(a.useState)(!1),b=Object(o.a)(j,2),p=b[0],y=b[1],v=localStorage.getItem("token-petit-clos"),C=Object(a.useState)(0),A=Object(o.a)(C,2),w=(A[0],A[1]);Object(a.useEffect)((function(){s&&Object.keys(s).length>0&&w(s.like)}),[]);var I="data:".concat(null===(t=s.image)||void 0===t?void 0:t.contentType,";base64,"),E=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===(n=s.image)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.data);return Object(x.jsxs)(m.a,{className:"home",children:[r&&Object(x.jsxs)("div",{className:"home-addbutton",children:[s&&0===Object.keys(s).length&&Object(x.jsx)(h.a,{loading:p,disabled:p,color:"green",circular:!0,size:"medium",onClick:function(){return d(!0)},children:Object(x.jsx)(O.a,{icon:g.j,size:"2x"})}),s&&Object.keys(s).length>0&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(h.a,{loading:p,disabled:p,color:"red",circular:!0,size:"medium",onClick:function(){return e=s._id,void(v?(y(!0),i()({method:"delete",url:"".concat(k,"/api/events/deleteEvent"),data:{eventId:e},headers:{Authorization:"Bearer "+v}}).then((function(e){return l({})})).catch((function(e){return console.log(e)})).finally((function(){return y(!1)}))):u(!0));var e},children:Object(x.jsx)(O.a,{icon:g.n,size:"2x"})})})]}),s&&Object.keys(s).length>0&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f.a,{className:"home-header",as:"h1",style:{background:M,color:P,border:"1px solid ".concat(S)},children:s.name}),Object(x.jsxs)(m.a,{text:!0,className:"home-presentation",style:{background:M,color:P,border:"1px solid ".concat(S)},children:[s.image&&Object(x.jsx)("div",{children:Object(x.jsx)("img",{style:{width:"100%"},src:I+E,alt:s.name})}),s.date&&Object(x.jsx)("p",{children:"Le :\n                ".concat(new Date(s.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}))}),Object(x.jsx)("p",{children:s.description})]})]}),s&&0===Object.keys(s).length&&Object(x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(x.jsx)("img",{height:"180px",width:"320px",src:"./assets/images/logo.png",alt:"logo pigale"})})]})}),L=n(90),_=n.n(L),B=n(123),V=n(247),U=n(93),R=n(244),q=n(78),T=n.n(q),J=function(e){var t=e.setEvent,n=e.setAppMessage,c=e.setOpenLoginModal,r=e.openAddEventModal,s=e.setOpenAddEventModal,l=Object(a.useState)({name:"",description:"",date:"",like:0,image:""}),d=Object(o.a)(l,2),u=d[0],j=d[1],p=new Date,g=Object(a.useState)(!1),O=Object(o.a)(g,2),m=O[0],y=O[1],v=function(e){var t={};t[e.target.name]=e.target.value,j(Object(b.a)(Object(b.a)({},u),t))},C=function(){var e=Object(B.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.a.imageFileResizer(t.target.files[0],500,500,"JPEG",100,0,(function(e){j(Object(b.a)(Object(b.a)({},u),{},{image:e}))}),"file");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=Object(a.useRef)(null),S=localStorage.getItem("token-petit-clos");return Object(x.jsxs)(V.a,{closeIcon:!0,onClose:function(){return s(!1)},onOpen:function(){return s(!0)},open:r,size:"small",children:[Object(x.jsxs)(f.a,{icon:!0,children:[Object(x.jsx)(U.a,{name:"add"}),"Ajouter un Evenement"]}),Object(x.jsx)(V.a.Content,{children:Object(x.jsxs)(R.a,{onSubmit:function(e){e.preventDefault();var a=new FormData;a.append("name",u.name),a.append("description",u.description||""),a.append("date",u.date||""),a.append("like",0),a.append("image",u.image||""),S?(y(!0),i()({method:"post",url:"".concat(k,"/api/events/createEvent"),data:a,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+S}}).then((function(e){e&&200===e.data.status&&(t(e.data.data),j({name:"",description:"",date:"",like:0,image:""})),n({success:200===e.data.status,message:e.data.message})})).then((function(){s(!1)})).catch((function(e){return n({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){y(!1)}))):c(!0)},id:"addEvent-form",children:[Object(x.jsxs)(R.a.Field,{required:!0,error:!u.name,children:[Object(x.jsx)("label",{children:"Nom de l'evenement"}),Object(x.jsx)("input",{value:u.name,name:"name",type:"text",onChange:function(e){return v(e)}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"Description"}),Object(x.jsx)("textarea",{value:u.description,name:"description",rows:"5",cols:"33",onChange:function(e){return v(e)}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"Date de l'evenement"}),Object(x.jsx)("input",{value:u.date,name:"date",type:"date",min:p.toISOString().split("T")[0],onChange:function(e){return v(e)}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("input",{ref:M,accept:"image/*",id:"addEventImage",files:u.image,type:"file",hidden:!0,onChange:function(e){return C(e)}}),Object(x.jsx)(h.a,{disabled:m,loading:m,type:"button",onClick:function(){return M.current.click()},color:"orange",inverted:!0,children:"Ajouter une image"})]})]})}),Object(x.jsxs)(V.a.Actions,{children:[Object(x.jsxs)(h.a,{disabled:m||!u.name,loading:m,color:"green",type:"submit",form:"addEvent-form",inverted:!0,children:[Object(x.jsx)(U.a,{name:"add"})," Ajouter"]}),Object(x.jsxs)(h.a,{disabled:m,loading:m,color:"red",type:"submit",form:"addEvent-form",inverted:!0,onClick:function(){return s(!1)},children:[Object(x.jsx)(U.a,{name:"remove"})," Annuler"]})]})]})},H=n(243),G=function(e){var t=e.selectedCategory,n=e.setAppMessage,c=e.openAddProductModal,r=e.setOpenAddProductModal,s=e.setOpenLoginModal,l=e.setProducts,d=Object(a.useState)({name:"",region:"",description:"",price:"",type:"",category:"",subCategory:"",choice:!1,visible:!0,image:""}),u=Object(o.a)(d,2),j=u[0],p=u[1],g=Object(a.useState)(!1),O=Object(o.a)(g,2),m=O[0],y=O[1],v=Object(a.useRef)(null);Object(a.useEffect)((function(){p(Object(b.a)(Object(b.a)({},j),{},{type:t.slug}))}),[t]);var C=function(e){var t={};t[e.target.name]=e.target.value,p(Object(b.a)(Object(b.a)({},j),t))},M=function(){var e=Object(B.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.a.imageFileResizer(t.target.files[0],500,500,"JPEG",100,0,(function(e){p(Object(b.a)(Object(b.a)({},j),{},{image:e}))}),"file");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=localStorage.getItem("token-petit-clos");return Object(x.jsxs)(V.a,{onClose:function(){return r(!1)},onOpen:function(){return r(!0)},open:c,size:"small",children:[Object(x.jsxs)(f.a,{icon:!0,children:[Object(x.jsx)(U.a,{name:"add"}),"Ajouter un Produit"]}),Object(x.jsx)(V.a.Content,{children:Object(x.jsxs)(R.a,{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("name",j.name),t.append("description",j.description||""),t.append("region",j.region||""),t.append("price",j.price),t.append("type",j.type),t.append("category",j.category||""),t.append("subCategory",j.subCategory||""),t.append("choice",j.choice||!1),t.append("visible",j.visible||!0),t.append("image",j.image||""),S?(y(!0),i()({method:"post",url:"".concat(k,"/api/products/createProduct"),data:t,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+S}}).then((function(e){e&&200===e.data.status&&(l(e.data.data),p({name:"",region:"",description:"",price:"",type:"",category:"",subCategory:"",choice:!1,visible:!0,image:""})),n({success:200===e.data.status,message:e.data.message})})).then((function(){r(!1)})).catch((function(e){return n({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){y(!1)}))):s(!0)},id:"addProduct-form",children:[Object(x.jsxs)(R.a.Field,{required:!0,error:!j.name,children:[Object(x.jsx)("label",{children:"Nom du Produit"}),Object(x.jsx)("input",{value:j.name,name:"name",type:"text",onChange:function(e){return C(e)}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"Description"}),Object(x.jsx)("textarea",{value:j.description,name:"description",rows:"5",cols:"33",onChange:function(e){return C(e)}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"R\xe9gion"}),Object(x.jsx)("input",{value:j.region,name:"region",type:"text",onChange:function(e){return C(e)}})]}),Object(x.jsxs)(R.a.Field,{required:!0,error:!j.price,children:[Object(x.jsx)("label",{children:"Prix"}),Object(x.jsx)("input",{min:0,step:.1,value:j.price,name:"price",type:"number",onChange:function(e){return C(e)}})]}),Object(x.jsxs)(R.a.Field,{required:!0,error:!j.type,children:[Object(x.jsx)("label",{children:"Type de Produit"}),E.map((function(e){return e.slug&&Object(x.jsx)(H.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=j.type;t=e,p(Object(b.a)(Object(b.a)({},j),{},{type:t}))}(e.slug)},checked:j.type===e.slug},e.slug)}))]}),("vins"===j.type||"alcools"===j.type||"cuisine"===j.type||"champagnes"===j.type)&&Object(x.jsxs)(R.a.Field,{required:!0,error:!j.category,children:[Object(x.jsx)("label",{children:"Categorie de Produit"}),E.map((function(e){var t;return e.slug===j.type&&(null===(t=e.subCategories)||void 0===t?void 0:t.map((function(e){return Object(x.jsx)(H.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=j.category;t=e,p(Object(b.a)(Object(b.a)({},j),{},{category:t}))}(e.slug)},checked:j.category===e.slug},e.slug)})))}))]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"Choix du Patron ?"}),Object(x.jsx)(H.a,{toggle:!0,checked:j.choice,onChange:function(){return p(Object(b.a)(Object(b.a)({},j),{},{choice:!j.choice}))}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("input",{ref:v,accept:"image/*",id:"addImage",files:j.image,type:"file",hidden:!0,onChange:function(e){return M(e)}}),Object(x.jsx)(h.a,{disabled:m,loading:m,type:"button",onClick:function(){return v.current.click()},color:"orange",inverted:!0,children:"Ajouter une image"})]})]})}),Object(x.jsxs)(V.a.Actions,{children:[Object(x.jsxs)(h.a,{disabled:m||!j.name||!j.price||!j.type||("vins"===j.type||"alcools"===j.type||"cuisine"===j.type||"champagnes"===j.type)&&!j.category,loading:m,color:"green",type:"submit",form:"addProduct-form",inverted:!0,children:[Object(x.jsx)(U.a,{name:"add"})," Ajouter"]}),Object(x.jsxs)(h.a,{disabled:m,loading:m,color:"red",type:"submit",form:"addProduct-form",inverted:!0,onClick:function(){return r(!1)},children:[Object(x.jsx)(U.a,{name:"remove"})," Annuler"]})]})]})},K=["image"],Y=function(e){var t=e.product,n=e.setOpenEditProductModal,c=e.openEditProductModal,r=e.setOpenLoginModal,s=e.setAppMessage,l=e.setProducts,d=(t.image,Object(p.a)(t,K)),u=Object(a.useState)({name:d.name,region:d.region,description:d.description,price:d.price,type:d.type,category:d.category,subCategory:d.subCategory,choice:d.choice,visible:d.visible}),j=Object(o.a)(u,2),g=j[0],O=j[1],m=Object(a.useState)(!1),y=Object(o.a)(m,2),v=y[0],C=y[1];Object(a.useEffect)((function(){O(Object(b.a)({},d))}),[t]);var M=function(e){var t={};t[e.target.name]=e.target.value,O(Object(b.a)(Object(b.a)({},g),t))},S=localStorage.getItem("token-petit-clos");return Object(x.jsxs)(V.a,{onClose:function(){return n(!1)},onOpen:function(){return n(!0)},open:c,size:"small",children:[Object(x.jsxs)(f.a,{icon:!0,children:[Object(x.jsx)(U.a,{name:"edit"}),"Editer ",d.name]}),Object(x.jsx)(V.a.Content,{children:Object(x.jsxs)(R.a,{onSubmit:function(e){e.preventDefault(),S?(C(!0),i()({method:"post",url:"".concat(k,"/api/products/updateProduct"),data:{update:g,productId:d._id},headers:{Authorization:"Bearer "+S}}).then((function(e){e&&200===e.data.status&&l(e.data.data),s({success:200===e.data.status,message:e.data.message})})).catch((function(e){s({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){C(!1),n(!1)}))):(n(!1),r(!0))},id:"editProduct-form",children:[Object(x.jsxs)(R.a.Field,{required:!0,error:!g.name,children:[Object(x.jsx)("label",{children:"Nom du Produit"}),Object(x.jsx)("input",{value:g.name,name:"name",type:"text",onChange:function(e){return M(e)}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"Description"}),Object(x.jsx)("textarea",{value:g.description,name:"description",rows:"5",cols:"33",onChange:function(e){return M(e)}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"R\xe9gion"}),Object(x.jsx)("input",{value:g.region,name:"region",type:"text",onChange:function(e){return M(e)}})]}),Object(x.jsxs)(R.a.Field,{required:!0,error:!g.price,children:[Object(x.jsx)("label",{children:"Prix"}),Object(x.jsx)("input",{min:0,step:.1,value:g.price,name:"price",type:"number",onChange:function(e){return M(e)}})]}),Object(x.jsxs)(R.a.Field,{required:!0,error:!g.type,children:[Object(x.jsx)("label",{children:"Type de Produit"}),E.map((function(e){return e.slug&&Object(x.jsx)(H.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=g.type;t=e,O(Object(b.a)(Object(b.a)({},g),{},{type:t}))}(e.slug)},checked:g.type===e.slug},e.slug)}))]}),("vins"===t.type||"alcools"===t.type||"cuisine"===t.type||"champagnes"===t.type)&&Object(x.jsxs)(R.a.Field,{required:!0,error:!g.category,children:[Object(x.jsx)("label",{children:"Categorie de Produit"}),E.map((function(e){var t;return e.slug===g.type&&(null===(t=e.subCategories)||void 0===t?void 0:t.map((function(e){return Object(x.jsx)(H.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=g.category;t=e,O(Object(b.a)(Object(b.a)({},g),{},{category:t}))}(e.slug)},checked:g.category===e.slug},e.slug)})))}))]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"Choix du Patron ?"}),Object(x.jsx)(H.a,{toggle:!0,checked:g.choice,onChange:function(){return O(Object(b.a)(Object(b.a)({},g),{},{choice:!g.choice}))}})]})]})}),Object(x.jsxs)(V.a.Actions,{children:[Object(x.jsxs)(h.a,{disabled:v||!g.name||!g.price||!g.type||("vins"===t.type||"alcools"===t.type||"cuisine"===t.type||"champagnes"===t.type)&&!g.category,loading:v,color:"purple",type:"submit",form:"editProduct-form",inverted:!0,children:[Object(x.jsx)(U.a,{name:"edit"})," Editer"]}),Object(x.jsxs)(h.a,{disabled:v,loading:v,color:"red",type:"submit",form:"editProduct-form",inverted:!0,onClick:function(){return n(!1)},children:[Object(x.jsx)(U.a,{name:"remove"})," Annuler"]})]})]})},Q=function(e){var t,n=e.openImageModal,a=e.setOpenImageModal,c=e.product,r=c.image,o=c.name,s="data:".concat(null===r||void 0===r?void 0:r.contentType,";base64,"),i=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.data);return Object(x.jsxs)(V.a,{closeIcon:!0,basic:!0,open:n,onClose:function(){return a(!1)},children:[Object(x.jsx)(f.a,{children:o}),Object(x.jsx)(V.a.Content,{children:Object(x.jsx)("img",{style:{width:"100%"},src:s+i,alt:o})})]})},W=function(e){var t=e.setOpenLoginModal,n=e.openLoginModal,c=e.setUser,r=e.setAppMessage,s=Object(a.useState)(""),l=Object(o.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)(""),b=Object(o.a)(j,2),p=b[0],g=b[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),y=m[0],v=m[1];return Object(x.jsxs)(V.a,{onClose:function(){return t(!1)},onOpen:function(){return t(!0)},open:n,size:"small",children:[Object(x.jsxs)(f.a,{icon:!0,children:[Object(x.jsx)(U.a,{name:"user"}),"Se Connecter"]}),Object(x.jsx)(V.a.Content,{children:Object(x.jsxs)(R.a,{onSubmit:function(e){e.preventDefault(),v(!0),i()({method:"post",url:"".concat(k,"/auth/login"),data:{email:d,password:p}}).then((function(e){c(e.data.role),r({success:200===e.data.status,message:e.data.message}),localStorage.setItem("token-petit-clos",e.data.token),t(!1)})).catch((function(e){r({success:!1,message:"il y a eu un probl\xe9me durant la connexion"})})).finally((function(){v(!1)}))},id:"auth-form",children:[Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"E-Mail"}),Object(x.jsx)("input",{value:d,type:"email",onChange:function(e){return u(e.target.value)}})]}),Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("label",{children:"Mot de passe"}),Object(x.jsx)("input",{type:"password",value:p,onChange:function(e){return g(e.target.value)}})]})]})}),Object(x.jsx)(V.a.Actions,{children:Object(x.jsxs)(h.a,{color:"green",loading:y,type:"submit",form:"auth-form",disabled:0===d.length||0===p.length||y,inverted:!0,children:[Object(x.jsx)(U.a,{name:"checkmark"})," Connexion"]})})]})},X=function(e){var t,n=e.openUpdateImageModal,c=e.setOpenUpdateImageModal,r=e.product,s=e.setProducts,l=e.setOpenLoginModal,d=e.setAppMessage,u=Object(a.useState)(""),j=Object(o.a)(u,2),b=j[0],p=j[1],g=Object(a.useState)(!1),O=Object(o.a)(g,2),y=O[0],v=O[1],C=Object(a.useRef)(null),M=r._id,S=r.name,P=r.image;Object(a.useEffect)((function(){b&&function(e){var t=document.querySelector(".showimage"),n=new FileReader;t&&(n.onload=function(){t.src=n.result},n.readAsDataURL(e))}(b)}),[b]);var A=localStorage.getItem("token-petit-clos"),w="data:".concat(null===P||void 0===P?void 0:P.contentType,";base64,"),I=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===P||void 0===P||null===(t=P.data)||void 0===t?void 0:t.data);return Object(x.jsxs)(V.a,{open:n,onClose:function(){return c(!1)},children:[Object(x.jsxs)(f.a,{icon:!0,children:[Object(x.jsx)(U.a,{name:"image"}),"Editer l'image"]}),(P||b)&&Object(x.jsx)(m.a,{children:Object(x.jsx)("img",{className:"showimage",style:{width:"100%",height:"100%"},src:w+I,alt:S})}),Object(x.jsx)(V.a.Content,{children:Object(x.jsx)(R.a,{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("image",b);var n=localStorage.getItem("token-petit-clos");n?(v(!0),i()({method:"post",url:"".concat(k,"/api/products/updateProductImage/").concat(M),data:t,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}).then((function(e){e&&200===e.data.status?(s(e.data.data),d({success:200===e.data.status,message:e.data.message})):d({success:200===e.data.status,message:e.data.message})})).then((function(){c(!1),p("")})).catch((function(e){return console.log(e)})).finally((function(){return v(!1)}))):(c(!1),l(!0))},id:"editImage-form",children:Object(x.jsxs)(R.a.Field,{children:[Object(x.jsx)("input",{ref:C,accept:"image/*",id:"addImage",files:b,type:"file",hidden:!0,onChange:function(e){T.a.imageFileResizer(e.target.files[0],500,500,"JPEG",100,0,(function(e){p(e)}),"file")}}),Object(x.jsx)(h.a,{disabled:y,loading:y,type:"button",onClick:function(){return C.current.click()},color:"orange",inverted:!0,children:"Modifier l'image"})]})})}),Object(x.jsxs)(V.a.Actions,{children:[b&&Object(x.jsxs)(h.a,{loading:y,disabled:y,color:"green",type:"submit",form:"editImage-form",inverted:!0,children:[Object(x.jsx)(U.a,{name:"add"})," Envoyer l'image pour ",S]}),P&&Object(x.jsxs)(h.a,{loading:y,disabled:y,type:"button",color:"red",form:"editImage-form",inverted:!0,onClick:function(){A?(v(!0),i()({method:"post",url:"".concat(k,"/api/products/updateProduct"),data:{update:{image:""},productId:M},headers:{Authorization:"Bearer "+A}}).then((function(e){s(e.data.data),d({success:200===e.data.status,message:"Image supprim\xe9e avec succ\xe9s"})})).catch((function(e){return console.log(e)})).finally((function(){v(!1),c(!1)}))):(c(!1),l(!0))},children:[Object(x.jsx)(U.a,{name:"delete"})," Supprimer l'image pour ",S]}),Object(x.jsxs)(h.a,{loading:y,disabled:y,color:"red",type:"submit",form:"editImage-form",inverted:!0,onClick:function(){return c(!1)},children:[Object(x.jsx)(U.a,{name:"remove"})," Annuler"]})]})]})},Z=n(65),$=n(252),ee=n(253),te=n(254),ne=(n(223),function(e){var t=e.selectedCategory,n=e.setActiveMenu,c=e.setDropdownValue,r=e.products,o=e.setFilteredProducts,s=e.setSelectedCategory,i=e.sidebarVisible,l=e.setSidebarVisible,d=e.children;return Object(a.useEffect)((function(){t&&(n(""),c(""),o([]),o(r.filter((function(e){return e.type===t.slug})))),"vins"===t.slug&&n("rouges"),"alcools"===t.slug&&n("premiums"),"cuisine"===t.slug&&n("salades"),"champagnes"===t.slug&&n("champagnes bruts")}),[t]),Object(x.jsx)($.a,{columns:1,children:Object(x.jsx)($.a.Column,{children:Object(x.jsxs)(ee.a.Pushable,{as:te.a,children:[Object(x.jsxs)(ee.a,{style:{background:"#2B2B29"},as:w.a,animation:"overlay",icon:"labeled",onHide:function(){return l(!1)},onShow:function(){return l(!0)},vertical:!0,visible:i,width:"thin",children:[Object(x.jsx)(Z.b,{to:"/",onClick:function(){return s({})},children:Object(x.jsx)(w.a.Item,{className:"categories-sidebar-item",children:Object(x.jsx)(w.a.Header,{children:Object(x.jsx)("img",{height:"65px",width:"120px",src:"./assets/images/logo.png",alt:"logo pigale"})})})}),Object(x.jsx)(j.a,{}),E.map((function(e){return Object(x.jsx)(Z.b,{to:"/categories/".concat(e.slug),onClick:function(){s(e),l(!1)},children:Object(x.jsxs)(w.a.Item,{className:"categories-sidebar-item",children:[Object(x.jsx)(w.a.Header,{children:e.icon}),Object(x.jsx)("span",{children:e.name})]})},e.slug)}))]}),Object(x.jsx)(ee.a.Pusher,{dimmed:i,children:Object(x.jsx)(te.a,{basic:!0,children:d})})]})})})}),ae=n(142),ce=(n(224),function(e){e.facebookUrl,e.instagramUrl,e.phoneNumber,e.backgroundColor,e.productBackgroundColor,e.textColor,e.titleColor;return Object(x.jsxs)("div",{className:"footer",children:[Object(x.jsx)("div",{children:Object(x.jsxs)(f.a,{as:"h3",style:{color:P},children:["Retrouvez nous sur :"," "]})}),Object(x.jsxs)("div",{className:"footer__icons",children:[Object(x.jsx)("a",{target:"_blank",href:"https://www.facebook.com/".concat("Bistrot-le-pigale-508686645856259"),rel:"noreferrer",children:Object(x.jsx)(O.a,{style:{color:"#3B5998",background:"white",borderRadius:"100%"},size:"3x",icon:ae.a,pull:"left"})}),Object(x.jsx)("a",{target:"_blank",href:"https://www.instagram.com/".concat(""," "),rel:"noreferrer",children:Object(x.jsx)(O.a,{style:{color:"#3F729B",borderRadius:"100%"},size:"3x",icon:ae.b,pull:"right"})})]}),Object(x.jsx)(j.a,{}),Object(x.jsx)("div",{children:Object(x.jsxs)(f.a,{as:"h3",style:{color:P},children:["Contactez nous !"," "]})}),Object(x.jsxs)("div",{className:"footer__icons",children:[Object(x.jsx)("a",{href:"mailto:".concat("sarl.lepigale@orange.fr"),children:Object(x.jsx)(O.a,{style:{"--fa-primary-color":"black","--fa-secondary-color":"white","--fa-secondary-opacity":.8},size:"3x",icon:g.e,pull:"left"})}),Object(x.jsx)("a",{href:"tel:".concat("0495212046"),children:Object(x.jsx)(O.a,{style:{"--fa-primary-color":"firebrick","--fa-secondary-color":"black","--fa-primary-opacity":1,"--fa-secondary-opacity":1},size:"3x",icon:g.i,pull:"right"})})]}),Object(x.jsx)(j.a,{}),Object(x.jsxs)("div",{className:"footer__copyright",style:{color:P},children:["Copyright \xa9 ",Object(x.jsx)("a",{style:{color:P,textDecoration:"underline"},href:"".concat("https://bistrotlepigale.fr"),children:Object(x.jsx)("span",{children:"Le Pigale\xa0"})}),Object(x.jsx)("span",{children:" ".concat((new Date).getFullYear(),". ")})]}),Object(x.jsx)("div",{className:"footer__alvp",children:Object(x.jsxs)("a",{style:{color:P,fontSize:"1em"},href:"mailto:pef@alvp-developments.com",children:["Made with",Object(x.jsx)(O.a,{className:"alvp__icon",color:"darkred",icon:g.g,size:"2x"}),"by ALVP-Developments Ajaccio"]})})]})}),re=(n(225),n(226),function(e){var t=e.setSelectedCategory,n=e.setSidebarVisible,a=e.setOpenLoginModal,c=e.user,r=e.loading;return Object(x.jsxs)("div",{className:"topappbar",children:[Object(x.jsx)(Z.b,{to:"/",onClick:function(){return t({})},children:Object(x.jsx)("div",{className:"topappbar-image",children:Object(x.jsx)("img",{height:"65px",width:"120px",src:"./assets/images/logo.png",alt:"logo pigale"})})}),Object(x.jsxs)("div",{className:"topappbar-icons",children:[Object(x.jsx)(h.a,{disabled:r,loading:r,icon:!0,circular:!0,color:c?"green":"grey",onClick:function(){return a(!0)},children:Object(x.jsx)(O.a,{size:"3x",icon:g.o})}),Object(x.jsx)(h.a,{disabled:r,loading:r,icon:!0,circular:!0,onClick:function(){return n(!0)},children:Object(x.jsx)(O.a,{size:"3x",icon:g.a})})]})]})}),oe=(n(227),function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({}),s=Object(o.a)(r,2),b=s[0],p=s[1],g=Object(a.useState)(""),O=Object(o.a)(g,2),m=O[0],h=O[1],f=Object(a.useState)(""),y=Object(o.a)(f,2),v=y[0],C=y[1],M=Object(a.useState)(""),S=Object(o.a)(M,2),P=S[0],A=S[1],w=Object(a.useState)(!1),I=Object(o.a)(w,2),E=I[0],z=I[1],F=Object(a.useState)(!1),L=Object(o.a)(F,2),_=L[0],B=L[1],V=Object(a.useState)(!1),U=Object(o.a)(V,2),R=U[0],q=U[1],T=Object(a.useState)(!1),H=Object(o.a)(T,2),K=H[0],Z=H[1],$=Object(a.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],oe=Object(a.useState)(!1),se=Object(o.a)(oe,2),ie=se[0],le=se[1],de=Object(a.useState)(!1),ue=Object(o.a)(de,2),je=(ue[0],ue[1]),be=Object(a.useState)({}),pe=Object(o.a)(be,2),ge=pe[0],Oe=pe[1],me=Object(a.useState)([]),he=Object(o.a)(me,2),fe=he[0],xe=he[1],ye=Object(a.useState)({}),ve=Object(o.a)(ye,2),Ce=ve[0],ke=ve[1],Me=Object(a.useState)(!1),Se=Object(o.a)(Me,2),Pe=Se[0],Ae=Se[1],we=Object(a.useState)({}),Ie=Object(o.a)(we,2),Ee=Ie[0],ze=Ie[1],Fe=Object(a.useState)([]),Ne=Object(o.a)(Fe,2),De=Ne[0],Le=Ne[1],_e=Object(a.useState)(!1),Be=Object(o.a)(_e,2),Ve=(Be[0],Be[1]);return Object(a.useEffect)((function(){0!==Object.keys(Ce).length&&setTimeout((function(){ke({})}),5e3)}),[Ce]),Object(a.useEffect)((function(){Ae(!0),i.a.get("".concat(k,"/api/products/allProducts")).then((function(e){e&&xe(e.data.data)})).catch((function(e){return ke({success:!1,message:"Il y a eu un probl\xe9me, veuillez recharger la page"})})).finally((function(){return Ae(!1)})),Ve(!0),i.a.get("".concat(k,"/api/events/getEvent")).then((function(e){e&&ze(e.data.data)})).catch((function(e){ke({success:!1,message:"Il y a eu un probl\xe9me, veuillez recharger la page"})})).finally((function(){return Ve(!1)}))}),[]),Object(x.jsx)("div",{className:"App",style:{position:"relative"},children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{animation:"jiggle",duration:500,visible:Object.keys(Ce).length>0,children:Object(x.jsx)(u.a,{style:{position:"fixed",top:15,zIndex:"1000",width:"100%"},hidden:0===Object.keys(Ce).length,success:!!Ce.success,error:!Ce.success,children:Ce.message})}),Object(x.jsxs)(ne,{setActiveMenu:h,setDropdownValue:C,selectedCategory:b,setFilteredProducts:Le,products:fe,sidebarVisible:n,setSidebarVisible:c,setSelectedCategory:p,children:[Object(x.jsx)(re,{setSelectedCategory:p,loading:Pe,user:P,setSidebarVisible:c,setOpenLoginModal:z}),Object(x.jsx)(j.a,{hidden:!0}),Object(x.jsx)(W,{setUser:A,openLoginModal:E,setOpenLoginModal:z,setAppMessage:ke}),Object(x.jsxs)(l.c,{children:[Object(x.jsxs)(l.a,{exact:!0,path:"/",children:[Object(x.jsx)(J,{setEvent:ze,setAppMessage:ke,setOpenLoginModal:z,openAddEventModal:ie,setOpenAddEventModal:le}),Object(x.jsx)(D,{user:P,event:Ee,setEvent:ze,setOpenLoginModal:z,setOpenAddEventModal:le,setOpenEditEventModal:je})]}),Object(x.jsxs)(l.a,{path:"/categories/:categorie",children:[Object(x.jsx)(G,{setProducts:xe,selectedCategory:b,setOpenLoginModal:z,setAppMessage:ke,openAddProductModal:_,setOpenAddProductModal:B}),Object(x.jsx)(Y,{product:ge,setOpenEditProductModal:q,setAppMessage:ke,setOpenLoginModal:z,openEditProductModal:R,setProducts:xe}),Object(x.jsx)(X,{openUpdateImageModal:te,setOpenUpdateImageModal:ae,setProducts:xe,product:ge,setOpenLoginModal:z,setAppMessage:ke}),Object(x.jsx)(Q,{openImageModal:K,setOpenImageModal:Z,product:ge}),Object(x.jsx)(N,{filteredProducts:De,setFilteredProducts:Le,user:P,selectedCategory:b,activeMenu:m,setActiveMenu:h,dropdownValue:v,setDropdownValue:C,products:fe,setProducts:xe,setOpenLoginModal:z,setOpenAddProductModal:B,setOpenImageModal:Z,setOpenUpdateImageModal:ae,setOpenEditProductModal:q,setSelectedProduct:Oe})]})]}),Object(x.jsx)(j.a,{}),Object(x.jsx)(ce,{})]})]})})}),se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,256)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};n(228);r.a.render(Object(x.jsx)(Z.a,{basename:"/",children:Object(x.jsx)(oe,{})}),document.getElementById("root")),se()}},[[229,1,2]]]);
//# sourceMappingURL=main.20598864.chunk.js.map